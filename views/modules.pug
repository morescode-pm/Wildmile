extends layout

block content
  .page-header
    link(rel='stylesheet', href='/css/modules.css')
    link(rel='stylesheet', href='/css/plants.css')

    h3 Modules

  //- button.btn.btn-primary(type='button' data-toggle='modal' data-target='#newmod')
  //-   | New Module
  //- button.btn.btn-primary(type='button' data-toggle='modal' data-target='#newmod' onclick='clearPlants()')
  //-   | View Plants
  button#zoomIn.btn.btn-secondary
      i.fas.fa-search-plus
  button#zoomOut.btn.btn-secondary
      i.fas.fa-search-minus
  .pb-2.mt-2.mb-4.border-bottom

  //#map(style='opacity: 0.95;')
  nav.navbar.sticky-top.bg-light.fixed-element
    .container-fluid
      a.navbar-brand(href='#') Sticky top
  #infoCard(style='position: relative;')
    .card.fixed-element
      #infoPlant.h5.card-header Featured
      .card-body(id="cardBody")
        p#infoText.card-text 
        img(src="", alt="", id="infoImage", class="thubmnail", style=' width: 100px; height: 100px;')
  #zoomGlass
  #drawing
  .media
    .col-lg
    #modMap.container(data-mods=mods data-plantedPlants= plantedPlants data-plants=plants)
    //- #collapseExample.colapse
    //-   .col-lg
    #plantTable.hidden
      table#plants.table-sm.table-striped.table-bordered.table-hover(style='hidden')
          thead
            tr
              th(scope='col') Scientific Name
              th(scope='col') Common Name
              //- th(scope='col') Tags
              //- th(scope='col') Image
          tbody
          script.
            x = 0
          for plant in plants
            
            tr(onclick=`selectPlant('${plant.scientificName}')`)
              th(id=plant._id scope='row')= plant.scientificName
                td= plant.commonName
                //- td= plant.tags
                //- td
                //-   img(src=plant.botanicPhoto, class="thubmnail", style=' width: 100px; height: 100px;display: None')
                
              script.
                function hashCode(str) {
                  let hash = 0;
                  for (var i = 0; i < str.length; i++) {
                    hash = str.charCodeAt(i) + ((hash << 5) - hash);
                  }
                  return hash;
                }
                function pickColor(str) {
                  return `hsl(${hashCode(str) % 550}, 80%, 80%)`;
                }
                g = '!{plant._id}';
                var element = document.getElementById(g);
                l = '!{plant.scientificName}'
                console.log(l.replace(/ .*/,''))
                element.style.backgroundColor = pickColor(l.replace(/ .*/,''));
                //-  element.style.backgroundColor = pickColor(l);

    append partials/scripts
      script(src='/js/modMap.js')
    //- .page-footer
    //-   script.
    //-     draw_circle();

              //- svg(viewbox='0 0 100 100' xmlns='http://www.w3.org/2000/svg')
              //-   // Using g to inherit presentation attributes
              //-   g(fill='white' stroke='green' stroke-width='1')
              //-     circle(cx='10' cy='10' r='1' stroke='green' stroke-width='1')
              //-     circle(cx='10' cy='20' r='1' stroke='green' stroke-width='1')
              //-     circle(cx='20' cy='20' r='1' stroke='green' stroke-width='1')
              //-
              //-
              //- svg(width='100' height='100')
              //-   circle(cx='50' cy='50' r='0' stroke='green' stroke-width='4' fill='yellow')
              //- svg(width='900' height='300')
              //-   rect(x='50' y='10' rx='10' ry='10' width='600' height='200' style='fill:green;stroke:black;stroke-width:5;opacity:0.5')
